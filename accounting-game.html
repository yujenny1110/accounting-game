<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>å€Ÿè²¸æ³•å‰‡å­¸ç¿’éŠæˆ²</title>
<style>
  body { font-family: 'Noto Sans TC', sans-serif; background:#f6f7fb; margin:0; color:#222; }
  header { background:#3b82f6; color:#fff; padding:24px; text-align:center; }
  main { max-width:1000px; margin:0 auto; padding:24px; }
  .card { background:#fff; border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,0.08); padding:24px; margin-bottom:20px; }
  .center { text-align:center; }
  button { border:0; border-radius:10px; padding:12px 24px; font-size:1.1rem; cursor:pointer; }
  .btn-primary { background:#16a34a; color:#fff; }
  .btn-secondary { background:#0ea5e9; color:#fff; }
  .hidden { display:none; }
  table { width:100%; border-collapse:collapse; margin:8px 0; }
  th,td { border:1px solid #e5e7eb; padding:8px 10px; text-align:right; }
  th:first-child,td:first-child { text-align:left; }
</style>
</head>
<body>
<header>
  <h1>å€Ÿè²¸æ³•å‰‡å­¸ç¿’éŠæˆ²</h1>
</header>
<main>
  <div id="home" class="card center">
    <h2>ğŸ¯ éŠæˆ²èªªæ˜</h2>
    <p>é€™æ˜¯ä¸€å€‹å¹«åŠ©ä½ å­¸ç¿’ <strong>å€Ÿè²¸æ³•å‰‡</strong> çš„å°éŠæˆ²ã€‚æ¯ä¸€é¡Œæœƒå‡ºç¾ä¸€ç­†äº¤æ˜“ï¼Œè«‹ä½ é¸æ“‡æ­£ç¢ºçš„å€Ÿæ–¹èˆ‡è²¸æ–¹ç§‘ç›®åŠé‡‘é¡ã€‚</p>
    <ul style="text-align:left;display:inline-block;">
      <li>é¡Œç›®æ•¸é‡ï¼š10 é¡Œï¼ˆäºŒåˆ†éŒ„ï¼‰</li>
      <li>ç­”å°å¯å¾—åˆ†ï¼Œé€£çºŒç­”å°æœƒæœ‰åŠ æˆ</li>
      <li>éŠæˆ²çµæŸå¾Œæœƒè‡ªå‹•ç”¢å‡º <strong>æç›Šè¡¨</strong> å’Œ <strong>è³‡ç”¢è² å‚µè¡¨</strong></li>
    </ul>
    <p><button id="startBtn" class="btn-primary">é–‹å§‹éŠæˆ²</button></p>
  </div>

  <div id="game" class="hidden">
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;">
        <div>
          <span>åˆ†æ•¸ï¼š<b id="score">0</b></span>ï½œ
          <span>é€£çºŒç­”å°ï¼š<b id="streak">0</b></span>ï½œ
          <span>å‰©é¤˜é¡Œæ•¸ï¼š<b id="remaining">10</b></span>
        </div>
        <small>è³‡ç”¢/è²»æã€Œå€Ÿå¢è²¸æ¸›ã€ï¼Œè² å‚µ/æ¬Šç›Š/æ”¶ç›Šã€Œè²¸å¢å€Ÿæ¸›ã€</small>
      </div>
      <hr>
      <p id="prompt"></p>
      <div>
        <label>å€Ÿæ–¹ç§‘ç›®</label>
        <select id="debitAcc"></select>
        <label>å€Ÿæ–¹é‡‘é¡</label>
        <input id="debitAmt" type="number" min="1" step="1">
      </div>
      <div style="margin-top:10px;">
        <label>è²¸æ–¹ç§‘ç›®</label>
        <select id="creditAcc"></select>
        <label>è²¸æ–¹é‡‘é¡</label>
        <input id="creditAmt" type="number" min="1" step="1">
      </div>
      <div style="margin-top:16px;">
        <button id="submitBtn" class="btn-primary">é€å‡º</button>
        <button id="hintBtn" class="btn-secondary">æç¤º</button>
      </div>
      <div id="feedback" style="margin-top:10px;color:#555;"></div>
    </div>

    <div id="reports" class="hidden card">
      <h2>ğŸ“Š æœŸæœ«å ±è¡¨</h2>
      <div style="display:flex;gap:10px;flex-wrap:wrap;">
        <div style="flex:1;min-width:280px;">
          <h3>æç›Šè¡¨</h3>
          <div id="is"></div>
        </div>
        <div style="flex:1;min-width:280px;">
          <h3>è³‡ç”¢è² å‚µè¡¨</h3>
          <div id="bs"></div>
        </div>
      </div>
    </div>
  </div>
</main>
<script>
const accounts=[{name:"ç¾é‡‘",type:"è³‡ç”¢",normal:"å€Ÿ"},{name:"æ‡‰æ”¶å¸³æ¬¾",type:"è³‡ç”¢",normal:"å€Ÿ"},{name:"å­˜è²¨",type:"è³‡ç”¢",normal:"å€Ÿ"},{name:"è¨­å‚™",type:"è³‡ç”¢",normal:"å€Ÿ"},{name:"æ‡‰ä»˜å¸³æ¬¾",type:"è² å‚µ",normal:"è²¸"},{name:"è‚¡æœ¬",type:"æ¬Šç›Š",normal:"è²¸"},{name:"é¤é£²æ”¶å…¥",type:"æ”¶ç›Š",normal:"è²¸"},{name:"å®¢æˆ¿æ”¶å…¥",type:"æ”¶ç›Š",normal:"è²¸"},{name:"è–ªè³‡è²»ç”¨",type:"è²»æ",normal:"å€Ÿ"},{name:"æ°´é›»è²»ç”¨",type:"è²»æ",normal:"å€Ÿ"},{name:"éŠ·è²¨æˆæœ¬",type:"è²»æ",normal:"å€Ÿ"}];
const typeRule={"è³‡ç”¢":{inc:"å€Ÿ",dec:"è²¸"},"è² å‚µ":{inc:"è²¸",dec:"å€Ÿ"},"æ¬Šç›Š":{inc:"è²¸",dec:"å€Ÿ"},"æ”¶ç›Š":{inc:"è²¸",dec:"å€Ÿ"},"è²»æ":{inc:"å€Ÿ",dec:"è²¸"}};
const questions=[{text:"ä»¥ç¾é‡‘ $X è³¼å…¥å­˜è²¨ã€‚",debit:"å­˜è²¨",credit:"ç¾é‡‘"},{text:"ç¾é‡‘æ”¶å®¢æˆ¿æ”¶å…¥ $Xã€‚",debit:"ç¾é‡‘",credit:"å®¢æˆ¿æ”¶å…¥"},{text:"æ”¯ä»˜è–ªè³‡ $Xï¼ˆç¾é‡‘ï¼‰ã€‚",debit:"è–ªè³‡è²»ç”¨",credit:"ç¾é‡‘"},{text:"æ”¯ä»˜æ°´é›»è²» $Xï¼ˆç¾é‡‘ï¼‰ã€‚",debit:"æ°´é›»è²»ç”¨",credit:"ç¾é‡‘"},{text:"æ”¶åˆ°è‚¡æ±ç¾é‡‘æŠ•å…¥ $Xã€‚",debit:"ç¾é‡‘",credit:"è‚¡æœ¬"},{text:"è³’è³¼å­˜è²¨ $Xã€‚",debit:"å­˜è²¨",credit:"æ‡‰ä»˜å¸³æ¬¾"},{text:"å„Ÿé‚„æ‡‰ä»˜å¸³æ¬¾ $Xï¼ˆç¾é‡‘ï¼‰ã€‚",debit:"æ‡‰ä»˜å¸³æ¬¾",credit:"ç¾é‡‘"},{text:"ä»¥ç¾é‡‘ $X è³¼å…¥è¨­å‚™ã€‚",debit:"è¨­å‚™",credit:"ç¾é‡‘"},{text:"éŠ·è²¨æˆæœ¬ $Xï¼ˆå­˜è²¨è½‰æˆæœ¬ï¼‰ã€‚",debit:"éŠ·è²¨æˆæœ¬",credit:"å­˜è²¨"},{text:"ç¾é‡‘æ”¶é¤é£²æ”¶å…¥ $Xã€‚",debit:"ç¾é‡‘",credit:"é¤é£²æ”¶å…¥"}];
let idx=-1,amount=0,score=0,streak=0,remaining=10;const ledger={};accounts.forEach(a=>ledger[a.name]={debit:0,credit:0,type:a.type,normal:a.normal});
const debitSel=document.getElementById('debitAcc'),creditSel=document.getElementById('creditAcc'),debitAmt=document.getElementById('debitAmt'),creditAmt=document.getElementById('creditAmt'),promptEl=document.getElementById('prompt'),feedback=document.getElementById('feedback'),scoreEl=document.getElementById('score'),streakEl=document.getElementById('streak'),remainingEl=document.getElementById('remaining');
accounts.forEach(a=>{let o1=document.createElement('option');o1.value=a.name;o1.textContent=a.name;debitSel.appendChild(o1);let o2=document.createElement('option');o2.value=a.name;o2.textContent=a.name;creditSel.appendChild(o2);});
function randAmount(){return Math.floor(Math.random()*9+2)*100;}
function nextQ(){idx=Math.floor(Math.random()*questions.length);amount=randAmount();promptEl.textContent=questions[idx].text.replace('$X','$'+amount.toLocaleString());debitAmt.value=amount;creditAmt.value=amount;feedback.textContent='';}
function postLedger(d,da,c,ca){ledger[d].debit+=da;ledger[c].credit+=ca;}
function getAcc(name){return accounts.find(a=>a.name===name);}
function check(){const d=debitSel.value,c=creditSel.value,da=parseInt(debitAmt.value||'0'),ca=parseInt(creditAmt.value||'0');if(!d||!c||!da||!ca){feedback.textContent='è«‹è¼¸å…¥å®Œæ•´è³‡æ–™';return;}if(da!==ca){feedback.textContent='å€Ÿè²¸é‡‘é¡éœ€ç›¸ç­‰';return;}const ans=questions[idx];if(d===ans.debit&&c===ans.credit){score+=100;scoreEl.textContent=score;postLedger(d,da,c,ca);remaining--;remainingEl.textContent=remaining;feedback.style.color='#16a34a';feedback.textContent='âœ… æ­£ç¢ºï¼';if(remaining===0){endGame();}else{nextQ();}}else{feedback.style.color='red';feedback.textContent='âŒ å†è©¦ä¸€æ¬¡ï¼';}}
function calcBalances(){const assets=[],liabs=[],eq=[],rev=[],exp=[];let ta=0,tl=0,te=0,tr=0,tx=0;for(const [n,v]of Object.entries(ledger)){const m=getAcc(n);let bal=m.normal==='å€Ÿ'?v.debit-v.credit:v.credit-v.debit;if(Math.abs(bal)<1)continue;const a=Math.abs(bal);if(m.type==='è³‡ç”¢'){assets.push([n,a]);ta+=a;}else if(m.type==='è² å‚µ'){liabs.push([n,a]);tl+=a;}else if(m.type==='æ¬Šç›Š'){eq.push([n,a]);te+=a;}else if(m.type==='æ”¶ç›Š'){rev.push([n,a]);tr+=a;}else if(m.type==='è²»æ'){exp.push([n,a]);tx+=a;}}return{assets,liabs,eq,rev,exp,ta,tl,te,tr,tx,ni:tr-tx};}
function endGame(){document.getElementById('game').scrollIntoView();feedback.textContent='éŠæˆ²çµæŸï¼ä»¥ä¸‹æ˜¯ä½ çš„å ±è¡¨';const r=calcBalances();const isHTML=`<table><tr><th>é …ç›®</th><th>é‡‘é¡</th></tr><tr><td>æ”¶å…¥åˆè¨ˆ</td><td>${r.tr}</td></tr><tr><td>è²»ç”¨èˆ‡æˆæœ¬</td><td>${r.tx}</td></tr><tr><td>ç¨…å‰æ·¨åˆ©</td><td>${r.ni}</td></tr></table>`;const bsA=r.assets.map(a=>`<tr><td>${a[0]}</td><td>${a[1]}</td></tr>`).join('')+`<tr><td>è³‡ç”¢åˆè¨ˆ</td><td>${r.ta}</td></tr>`;const bsL=r.liabs.map(a=>`<tr><td>${a[0]}</td><td>${a[1]}</td></tr>`).join('')+`<tr><td>è² å‚µåˆè¨ˆ</td><td>${r.tl}</td></tr>`;const bsE=r.eq.map(a=>`<tr><td>${a[0]}</td><td>${a[1]}</td></tr>`).join('')+`<tr><td>ä¿ç•™ç›ˆé¤˜(æœŸæœ«)</td><td>${r.ni}</td></tr><tr><td>æ¬Šç›Šåˆè¨ˆ</td><td>${r.te+r.ni}</td></tr>`;document.getElementById('is').innerHTML=isHTML;document.getElementById('bs').innerHTML=`<div style='display:flex;gap:10px;'><div style='flex:1'><table><tr><th>è³‡ç”¢</th><th>é‡‘é¡</th></tr>${bsA}</table></div><div style='flex:1'><table><tr><th>è² å‚µ</th><th>é‡‘é¡</th></tr>${bsL}<tr><th>æ¬Šç›Š</th><th>é‡‘é¡</th></tr>${bsE}</table></div></div>`;document.getElementById('reports').classList.remove('hidden');}

document.getElementById('submitBtn').onclick=check;document.getElementById('hintBtn').onclick=()=>{const ans=questions[idx];feedback.textContent=`æç¤ºï¼šå€Ÿ ${ans.debit}ï¼›è²¸ ${ans.credit}`;};document.getElementById('startBtn').onclick=()=>{document.getElementById('home').classList.add('hidden');document.getElementById('game').classList.remove('hidden');nextQ();};
</script>
</body>
</html>

